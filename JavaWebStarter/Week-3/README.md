# :ledger: 3주차 - 자바 상속과 다형성
안녕하세요. 멘토 Duck Typing입니다.

3주차 내용정리는 잘 되셨나요? 아주 어렵죠? :dizzy_face:

상속을 이해한다는 것은 OOP가 무엇인지 알고있다는 것입니다.

OOP의 4대 속성을 다시 떠올려볼까요?
1. 추상화
2. 캡슐화
3. 상속
4. 다형성

신인 개발자 면접에서 OOP 4대속성을 많이 물어보는데요. 그 중에서도 특히**다형성**에대한 이해도가 얼마나 높은지 많이 물어봅니다.

이번 주차의 내용이 얼마나 중요한지~ 증말 :cherries:

상속과 형변환, 다형성, 업-다운 캐스팅을 재대로 이해하려면 반드시 메모리 구조를 그릴 수 있어야 합니다.

음.. 어려운 단어 많이 나올 예정입니다. 마음의 준비 되셨나요? :confounded:

> 당충전하고 읽기 준비!

---

###  Index :: 클릭하면 해당 목차로 뿅~!
- [:ledger: 3주차 - 자바 상속과 다형성](#ledger-3주차---자바-상속과-다형성)
    - [Index :: 클릭하면 해당 목차로 뿅~!](#index--클릭하면-해당-목차로-뿅)
    - [상속](#상속)
    - [메소드 오버라이딩](#메소드-오버라이딩)
    - [다형성](#다형성)
    - [다운캐스팅과 인터페이스](#다운캐스팅과-인터페이스)
    - [JVM 메모리 사용 영역](#jvm-메모리-사용-영역)
  - [자료 출처](#자료-출처)

### 상속
자바의 상속을 알아봅시다!

- 상속이란? 
> 상속이란 상위클래스에서 정의한 필드와 메서드를 하위클래스도 동일하게 사용할 수 있게 물려받는 것입니다.

- 상속을 사용하는 이유
> 코드를 재사용하기에 편하고 클래스 간 계층구조를 분류하고 관리하기 쉬워집니다.

- 자바 상속의 특징
1. 다중상속 금지
자바 클래스는는 단일 상속만 허용됩니다. 다중 상속을 허용하는 언어는 어떤것이 있을까요?

2. 최상위 클래스 : Object
자바의 모든 클래스는 최상위 클래스인 Object클래스는 상속받고있습니다.

클래스선언시 ```extends Object```를 생략해도 컴파일러가 붙여줍니다.

- super 키워드
서브클래스(하위)에서 수퍼클래스(상위)클래스에 접근할 수 있는 키워드입니다.

super키워드는 생성자와 파라미터를 동일하게 사용합니다. 

> 기본생성자(파라미터가 없는 생성자)는 생략해도 컴파일러가 자동으로생성해줍니다. 파라미터가있는 생성자를 선언시에는 기본생성자를 자동으로 추가해주지 않습니다. 원한다면 명시적으로 선언해야 합니다.

생성자가 무엇일까요? 클래스의 정보는 Class Area에 있습니다.

new키워드와 함께 생성자를 사용하게되면, Class Area에 있는 클래스를 정보로 Heap메모리에 객체(인스턴스)를 생성합니다. 



붕어빵틀(클래스)을 만드는 이유는 붕어빵(인스턴스)을 굽기위함이라는거~ 다시 기억을 떠올리면서.

### 메소드 오버라이딩
메소드 오버라이딩이란 무엇일까요? **다형성**의 핵심요소라고 할 수 있는 부분이고, 메소드 오버라이딩을 이해하는게 너무너무너무너무 중요합니다. 이 이해도는 프로그래밍뿐만아니라, 신입개발자 면접에도 많이 나오니, 꼭 정리하고 이해해보시길 바랍니다!



메소드 오버라이딩이란?
> 수퍼클래스가 가지고있는 메서드를 서브클래스에서 새롭게 다른로직으로 정의하고 싶을 때 사용하는 문법입니다.
> 상속관계에 있는 클래스간에 같은 이름의 메서드(정확하게 같은 메소드 시그니처)를 정의하는 문법을 오버라이딩이라고 합니다.
> 오버라이딩 어노테이션은 생략할 수도 있습니다.


메소드 오버라이딩은 **다이나믹 디스패칭**방식으로 동작합니다.

컴파일타임에는 알 수 없는 메서드의 의존성을 런타임에 늦게 바인딩하는것.

//TODO 메모리 그림 그리기

다이나믹 디스패칭은 클래스의 상속관계뿐만아니라, 인터페이스, 추상클래스를 구현한 클래스에서도 같은 메커니즘을 사용합니다.

### 다형성
다형성이란 무엇일까요?

 같은 타입이지만 실행 결과가 다양한 객체를 이용할 수 있는 성질을 말합니다.

 코드 측면에서 보면 다형성은 하나의 타입에 여러 객체를 대입함으로써 다양한 기능을 이용할 수 있도록 해준다.

 다형성을 위해 자바는 부모 클래스로 타입 변환을 허용합니다.

 예를 들어볼까요?

 ```
public class Car {
    Tire hankkokTire;
    Tire kumhoTire;
}
 ```
 
 위 코드 처럼 자동차 클래스를 설계할때, 틀을 잡아주는 Tire 클래스를 먼저 설계한다음, 타입으로 사용하여 ```Tire hankkokTire``` 라고 선언해 주고

  ```
public class Car {
    Tire hankkokTire = new HankookTire();
    Tire kumhoTire = new KumhoTire();
}
 ```

위코드처럼 실제사용할 타이어를 대입하면 됩니다.

이런 부모클래스타입으로 타입을 설정해주고, 객체를 생성하면, 자동타입변환(Promotion)이 발생합니다.

```부모클래스 변수 = 자식틀래스타입;```

자동 타입 변환의 개념은 자식은 부모의 특징과 기능을 상속받기 때문에 부모와 동잉하게 취급될 수 있다는 것입니다.



### 다운캐스팅과 인터페이스

### JVM 메모리 사용 영역
JVM의 사용영역부터 정리해 봅시다.

java.exe로 JVM이 시작되면 운영체제에서 할당받은 메모리 영역(Runtime Data Area)을 세부 영역으로 구분해서 사용합니다.

<img src="./image/jvm-architecture.png" width="100%" height="30%" display="inline-block" alt="JVM 구조"/>

- 메소드 영역(Method Area)

메소드 영역에는 코드에서 사용되는 클래스(.class)들을 클래스 로더로 읽어 클래스 별로 런타임 상수풀, 필드 데이터, 메소드 데이터, 메소드 코드, 생성자 코드 등을 분류해서 저장합니다.

메소드 영역은 JVM이 시작할 때 생성되고 모든 스레드가 공유하는 영역입니다.

- 힙 영역(Heap Area)

힙 영역은 객체와 배열이 생성되는 영역입니다.힙 영역에 생성된 객체와 배열은 JVM 스택 영역의 변수나 다른 객체의 필드에서 참조합니다.

힙메모리는 해당 메모리를 참조하는 변수나 필드가 없다면 GC(Garbage Collector)가 적절한 시점에 해당 메모리를 정리합니다.

- 스택 영역(Stack Area)

JVM 스택 영역은 각 스레드마다 하나씩 존재하며 스레드가 시작될 때 할당됩니다.

자바에서 추가적으로 스레드를 생성하지 않았다면 main 스레드만 존재하므로 JVM스택도 하나입니다.

우리가 엄청 많이 쓴 ```public static void main(String[] args)```이 친구입니다.

JVM스택은 메소드를 호출할 때마다 프레임(Frame)을 추가(push)하고 메소드가 종료되면 해당 프레임을 제거(pop)하는 동작을 수행합니다. (LIFO : Last in Fist Out)

프레임 내부에는 로컬 변수 스택이 있는데, 기본 타입 변수와 참조 타입 변수가 추가(push)되거나 제거(pop)됩니다. 변수가 이 영역에 생성되는 시점은 초기화가 될 때, 즉 최초로 변수에 값이 저장될 때이다.

<img src="./image/JVM-stack.png" width="100%" height="30%" display="inline-block" alt="JVM 스택"/>

## 자료 출처
- [javatutorial.net](https://javatutorial.net/jvm-explained)